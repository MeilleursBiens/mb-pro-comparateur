<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="comparator/css/styles.css" />
    <title>Comparateur de Revenus | MeilleursBiens</title>
  </head>
  <body>
    <main id="network-comparator">
      <div class="card comparator-container glass">
        <div class="card-content">
          <!-- Nouveau champ mutualisé -->
          <div class="field unified-search-wrapper">
            <label class="label">🔍 Votre réseau ou agence</label>
            <div class="unified-search-container">
              <input
                id="entitySearch"
                class="input"
                type="text"
                placeholder="Recherchez un réseau ou une agence... 🔎"
                autocomplete="off"
              />
              <div id="entitySuggestions" class="suggestions"></div>
            </div>
          </div>

          <!-- Inputs cachés pour compatibilité avec les fonctions existantes -->
          <div style="display:none">
            <input id="reseauSearch" type="text" />
            <input id="agencySearch" type="text" />
            <div id="reseauxSuggestions"></div>
            <div id="agenciesSuggestions"></div>
          </div>

          <div class="grid-form">
            <!-- Bloc Honoraires -->
            <div class="field field-block">
              <label class="label"
                >💶 Honoraires annuels HT <span class="label-hint">(€)</span
              ></label>
              <div class="dual-input" data-unit="€">
                <input
                  id="ar_honoraires"
                  class="input"
                  type="number"
                  min="10000"
                  step="500"
                  value="75000"
                />
                <input
                  id="ar_honoraires_range"
                  class="range"
                  type="range"
                  min="10000"
                  max="300000"
                  step="1000"
                  value="75000"
                />
              </div>
            </div>

            <!-- Bloc Ventes -->
            <div class="field field-block">
              <label class="label">🛒 Nombre de ventes</label>
              <div class="dual-input" data-unit="🏷️">
                <input
                  id="ar_ventes"
                  class="input"
                  type="number"
                  min="1"
                  step="1"
                  value="12"
                />
                <input
                  id="ar_ventes_range"
                  class="range"
                  type="range"
                  min="1"
                  max="60"
                  step="1"
                  value="12"
                />
              </div>
            </div>

            <!-- Forfait -->
            <div class="field field-block">
              <label class="label"
                >📦 Forfait mensuel HT <span class="label-hint">(€/mois)</span
              ></label>
              <div class="dual-input" data-unit="€">
                <input
                  id="ar_forfait"
                  class="input"
                  type="number"
                  min="0"
                  step="5"
                  value="150"
                />
                <input
                  id="ar_forfait_range"
                  class="range"
                  type="range"
                  min="0"
                  max="1000"
                  step="5"
                  value="150"
                />
              </div>
            </div>

            <!-- Commissions -->
            <div class="field field-block">
              <label class="label"
                >🎯 Commissions perçues <span class="label-hint">(%)</span
              ></label>
              <div class="dual-input" data-unit="%">
                <input
                  id="ar_commissions"
                  class="input"
                  type="number"
                  min="1"
                  max="100"
                  step="1"
                  value="70"
                />
                <input
                  id="ar_commissions_range"
                  class="range"
                  type="range"
                  min="1"
                  max="100"
                  step="1"
                  value="70"
                />
              </div>
            </div>
          </div>

          <p class="disclaimer">
            ℹ️ Les données peuvent varier selon les situations réelles. Ajustez
            librement pour refléter votre cas.
          </p>

          <!-- Résultats -->
          <div id="resultsSection" class="results-grid">
            <div class="result-card result-current">
              <div class="result-header">
                <h3 class="result-title">📉 Votre situation actuelle</h3>
                <span class="result-badge neutral" id="situation-type"
                  >Votre situation</span
                >
              </div>
              <div class="result-value">
                <span id="ar_total" class="amount" data-amount="52200"
                  >52.200€</span
                ><span class="per">/an</span>
              </div>
              <p class="result-sub">Après forfait & structure partagée</p>
            </div>

            <div class="result-vs">⇄</div>

            <div class="result-card result-mb highlight">
              <div class="result-header">
                <h3 class="result-title">🚀 Avec MeilleursBiens</h3>
                <span class="result-badge accent">100% commissions</span>
              </div>
              <div class="result-value">
                <span id="mb_total" class="amount" data-amount="75000"
                  >75.000€</span
                ><span class="per">/an</span>
              </div>
              <div class="growth-line">
                <span class="growth-tag"
                  >📈 +<span id="percentage_increase">43.7</span>%</span
                >
              </div>
              <p class="result-sub">Pack fixe 199€ + 159€ / vente</p>
            </div>

            <div class="saving-card">
              <div class="saving-label">🕳️ Coût caché de votre modèle actuel</div>
              <div class="saving-value">
                <span id="mb_difference" class="saving-amount" data-amount="22800"
                  >22.800€</span
                ><span class="per">/an</span>
              </div>
              <div class="bar-wrapper">
                <div class="bar-bg">
                  <div
                    class="bar-fill"
                    id="savingBar"
                    style="width:60%"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!-- CTA -->
          <div class="cta-stack">
            <button class="btn-primary" id="ctaContact">🤔 Comment est-ce possible ?</button>
            <p class="cta-text">🧠 On vous aide à projeter précisément vos revenus selon vos objectifs.</p>
          </div>
        </div>
      </div>

      <div id="advisor-widget" class="advisor-widget hidden"></div>
    </main>

    <script src="comparator/js/script.js"></script>
    <script src="comparator/js/compareNetworks.js"></script>
    <script src="comparator/js/compareAgencies.js"></script>
    <script src="comparator/js/unifiedSearch.js"></script>
  </body>
</html>
